<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>昂贵的集合</title>
</head>

<body>

<div></div>
<div></div>
<div></div>
<div></div>
<div></div>
<div></div>
<div></div>
<div></div>
<div></div>
<div></div>
<div></div>
<div></div>
<div></div>

<script>
/*var aDiv = document.getElementsByTagName('div');
for( var i=0;i<aDiv.length;i++ ){//这是一个死循环;它遍历现有 div,每次创建一个新的 div 并且附加到 body 上.像这样遍历 HTML 集合会导致逻辑错误,而且速度很慢,因为每次迭代都会进行查询.
	document.body.appendChild( document.creatElement('div') );
}*/

//下面的效率更高一些:
function toArr(coll){//集合转数组函数.
	for(var i=0,a=[],len=coll.length;i<len;i++){
		a[i] = coll[i];	
	}	
	console.log( a );
}
var coll = document.getElementsByTagName('div');
var arr = toArr(coll); //执行toArr()函数;

//slower:
function loopCollection(){
	for(var count = 0; count<coll.length;count++){
		
	}	
}

//faster:
function loopCopiedArray(){
	for(var count=0;count<arr.length;count++){
	
	}	
}

function loopCacheLengthCollection(){//此函数运行的和 loopCopiedArray() 一样快.
	var coll = document.getElementsByTagName('div');
		len = coll.length;
		for(var count=0;count<len;count++){
		
		}	
}
</script>

</body>
</html>
